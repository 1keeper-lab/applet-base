const a0_0xbe74b1=a0_0xa3bc;(function(_0x443f16,_0x5caab0){const _0x3351b3=a0_0xa3bc,_0xeccad3=_0x443f16();while(!![]){try{const _0x1f9bcd=-parseInt(_0x3351b3(0xff))/0x1*(parseInt(_0x3351b3(0xee))/0x2)+parseInt(_0x3351b3(0xf4))/0x3*(-parseInt(_0x3351b3(0x115))/0x4)+parseInt(_0x3351b3(0xf8))/0x5+-parseInt(_0x3351b3(0x113))/0x6+-parseInt(_0x3351b3(0x118))/0x7+parseInt(_0x3351b3(0x11e))/0x8+parseInt(_0x3351b3(0x11b))/0x9*(parseInt(_0x3351b3(0xfc))/0xa);if(_0x1f9bcd===_0x5caab0)break;else _0xeccad3['push'](_0xeccad3['shift']());}catch(_0x3b9d14){_0xeccad3['push'](_0xeccad3['shift']());}}}(a0_0x4d3d,0x3846d));const fs=require('fs'),path=require(a0_0xbe74b1(0xfd)),qrcode=require(a0_0xbe74b1(0xfa)),request=require(a0_0xbe74b1(0xe8)),{createHash}=require('crypto'),sep=path[a0_0xbe74b1(0x102)],rootDir=path[a0_0xbe74b1(0xec)](__dirname,'../../'),appJsPath=rootDir+sep+'app.json',app=require(appJsPath),AppRoot=a0_0xbe74b1(0xf3)+sep+app['appid'],ZipFile=AppRoot+a0_0xbe74b1(0x103),server=require(rootDir+sep+a0_0xbe74b1(0x11a)+sep+a0_0xbe74b1(0x107)+sep+a0_0xbe74b1(0xf7))[a0_0xbe74b1(0x112)];async function main(){const _0x37893a=a0_0xbe74b1,_0x443b16=createHash(_0x37893a(0x110))[_0x37893a(0xf6)](fs[_0x37893a(0x100)](ZipFile))[_0x37893a(0xe9)](_0x37893a(0x116)),_0x3340e1=app[_0x37893a(0x10e)],_0x4e3256=app[_0x37893a(0x106)],_0x3f5152=await postJson(server+_0x37893a(0x10f)+_0x3340e1+_0x37893a(0x109)+_0x443b16+_0x37893a(0x104)+_0x4e3256);if(_0x3f5152['code']!='0')throw Error(_0x3f5152[_0x37893a(0xf9)]);const _0x4aae9d=_0x3f5152[_0x37893a(0x119)];qrcode['generate'](_0x37893a(0x10a)+_0x4aae9d+'\x22,\x22name\x22:\x22'+app[_0x37893a(0x10c)]+_0x37893a(0x111)+app[_0x37893a(0x106)]+_0x37893a(0xfb)+app[_0x37893a(0x10e)]+'\x22}',{'small':!![]},function(_0x4f3c99){const _0x5085ea=_0x37893a;console[_0x5085ea(0x105)](_0x4f3c99);}),await wait(0x12c),console['log']('\x1b[36m%s\x1b[0m',_0x37893a(0xed)),await wait(0x12c);const _0x338710=process[_0x37893a(0xf5)];_0x338710[_0x37893a(0xfe)](_0x37893a(0xeb));var _0x591d28=!![];while(_0x591d28){try{await wait(0x3e8),_0x338710[_0x37893a(0xfe)]('.');const _0x580a32=await postJson(server+_0x37893a(0xf2)+_0x4aae9d);_0x580a32[_0x37893a(0xea)]=='0'?_0x580a32[_0x37893a(0x119)]==!![]&&(_0x591d28=![],_0x338710[_0x37893a(0xfe)]('\x0a'),upload(_0x4aae9d)):(_0x591d28=![],_0x338710[_0x37893a(0xfe)]('\x0a'),console[_0x37893a(0x105)](_0x37893a(0x101),_0x37893a(0xf1)));}catch(_0x2d55ac){}}}function a0_0xa3bc(_0x38100d,_0xdf6e4d){const _0x4d3d17=a0_0x4d3d();return a0_0xa3bc=function(_0xa3bc4e,_0x5e2c04){_0xa3bc4e=_0xa3bc4e-0xe7;let _0x5c36d7=_0x4d3d17[_0xa3bc4e];return _0x5c36d7;},a0_0xa3bc(_0x38100d,_0xdf6e4d);}function a0_0x4d3d(){const _0x3a2f14=['update','package.json','1695325qEHkeR','msg','qrcode-terminal','\x22,\x22appid\x22:\x22','83070MRWHJc','path','write','46661puJfUV','readFileSync','\x1b[31m%s\x1b[0m','sep','.zip','&version=','log','version','applet-base','generate','&hash=','{\x22action\x22:\x22upload\x22,\x22code\x22:\x22','\x0auploading...\x0a','name','multipart/form-data','appid','/v1/applet/publish/code?appid=','sha256','\x22,\x22version\x22:\x22','server','1498074MBXWDS','Upload\x20error\x20','4zbBIWj','hex','POST','1128925XvQKBn','data','node_modules','477JSCGfs','\x1b[32m%s\x1b[0m','application/json','3622176zVzGjT','createReadStream','request','digest','code','\x0achecking.','resolve','Please\x20login\x20to\x20the\x201Keeper\x20app\x20with\x20your\x20mobile\x20phone,\x20and\x20then\x20use\x20your\x20camera\x20to\x20scan\x20the\x20QR\x20code\x20for\x20authorization.','16lZZZSE','parse','GET','Authorization\x20timeout','/v1/applet/publish/code/status?code=','build','652071UXSJpi','stdout'];a0_0x4d3d=function(){return _0x3a2f14;};return a0_0x4d3d();}async function upload(_0x339aaf){const _0x975de6=a0_0xbe74b1;console['log'](_0x975de6(0x10b));const _0xdfbaf5=fs[_0x975de6(0xe7)](ZipFile),_0x3901d1={'url':server+'/v1/applet/publish','method':_0x975de6(0x117),'headers':{'code':_0x339aaf,'Content-Type':_0x975de6(0x10d)},'formData':{'file':{'value':_0xdfbaf5,'options':{'filename':null,'contentType':null}}}};request(_0x3901d1,(_0x15148e,_0x2777c8,_0x5b1135)=>{const _0x529620=_0x975de6;var _0x26e3f9=JSON[_0x529620(0xef)](_0x5b1135);_0x26e3f9[_0x529620(0xea)]=='0'?(console[_0x529620(0x105)](_0x529620(0x11c),'Release\x20success.\x20you\x20can\x20use\x201keeper\x20to\x20scan\x20the\x20QR\x20code\x20below\x20to\x20open\x20the\x20access\x20application\x20\x0a'),qrcode[_0x529620(0x108)](_0x26e3f9['data'],{'small':!![]},function(_0x5d5339){const _0x1348ae=_0x529620;console[_0x1348ae(0x105)](_0x5d5339);})):console[_0x529620(0x105)](_0x529620(0x101),_0x529620(0x114)+_0x26e3f9[_0x529620(0xf9)]+'\x20\x0a');});}async function wait(_0x382491){return new Promise(_0x3cbd00=>setTimeout(()=>_0x3cbd00(),_0x382491));}async function postJson(_0x25cfc1){return new Promise(_0x5eed76=>{const _0x1c0d42=a0_0xa3bc,_0x164639={'url':_0x25cfc1,'method':_0x1c0d42(0xf0),'headers':{'Content-Type':_0x1c0d42(0x11d)}};request(_0x164639,(_0x41221e,_0x11dcca,_0x7112d0)=>{const _0xf662a9=_0x1c0d42;_0x5eed76(JSON[_0xf662a9(0xef)](_0x7112d0));});});}main();