const a0_0x16f5a2=a0_0x459f;(function(_0xc971d9,_0x45bae4){const _0x3c71e6=a0_0x459f,_0x4bdbe8=_0xc971d9();while(!![]){try{const _0x30f10d=parseInt(_0x3c71e6(0x11b))/0x1+-parseInt(_0x3c71e6(0x10e))/0x2*(parseInt(_0x3c71e6(0xec))/0x3)+parseInt(_0x3c71e6(0x11a))/0x4*(-parseInt(_0x3c71e6(0x115))/0x5)+-parseInt(_0x3c71e6(0xf5))/0x6*(parseInt(_0x3c71e6(0xef))/0x7)+-parseInt(_0x3c71e6(0xfd))/0x8*(parseInt(_0x3c71e6(0x114))/0x9)+parseInt(_0x3c71e6(0x117))/0xa*(-parseInt(_0x3c71e6(0x102))/0xb)+parseInt(_0x3c71e6(0xf9))/0xc;if(_0x30f10d===_0x45bae4)break;else _0x4bdbe8['push'](_0x4bdbe8['shift']());}catch(_0x5e14fd){_0x4bdbe8['push'](_0x4bdbe8['shift']());}}}(a0_0xba1e,0x86829));const fs=require('fs'),path=require(a0_0x16f5a2(0xf7)),qrcode=require(a0_0x16f5a2(0x10a)),request=require('request'),{createHash}=require(a0_0x16f5a2(0xe9)),sep=path[a0_0x16f5a2(0xf8)],rootDir=path['resolve'](__dirname,a0_0x16f5a2(0x116)),appJsPath=rootDir+sep+a0_0x16f5a2(0xee),app=require(appJsPath),AppRoot=a0_0x16f5a2(0xfb)+sep+app[a0_0x16f5a2(0x103)],ZipFile=AppRoot+a0_0x16f5a2(0x11c),server=require(rootDir+sep+a0_0x16f5a2(0x112)+sep+'applet-base'+sep+a0_0x16f5a2(0x107))[a0_0x16f5a2(0xe8)];function a0_0x459f(_0x6ee2ed,_0x265299){const _0xba1e43=a0_0xba1e();return a0_0x459f=function(_0x459f24,_0x257736){_0x459f24=_0x459f24-0xe8;let _0x4d825b=_0xba1e43[_0x459f24];return _0x4d825b;},a0_0x459f(_0x6ee2ed,_0x265299);}async function main(){const _0x227db1=a0_0x16f5a2,_0x2bf04c=createHash(_0x227db1(0x10b))[_0x227db1(0x10d)](fs[_0x227db1(0x111)](ZipFile))[_0x227db1(0xfa)](_0x227db1(0x11d)),_0x1c4e20=app[_0x227db1(0x103)],_0x42b78b=app[_0x227db1(0xf1)],_0xe8d149=await postJson(server+_0x227db1(0xf0)+_0x1c4e20+_0x227db1(0x105)+_0x2bf04c+_0x227db1(0x113)+_0x42b78b);if(_0xe8d149[_0x227db1(0xeb)]!='0')throw Error(_0xe8d149[_0x227db1(0x10c)]);const _0x2e49ed=_0xe8d149[_0x227db1(0x106)];qrcode[_0x227db1(0x109)]('{\x22action\x22:\x22upload\x22,\x22code\x22:\x22'+_0x2e49ed+'\x22,\x22name\x22:\x22'+app[_0x227db1(0xfc)]+'\x22,\x22version\x22:\x22'+app[_0x227db1(0xf1)]+'\x22,\x22appid\x22:\x22'+app[_0x227db1(0x103)]+'\x22}',{'small':!![]},function(_0x40634c){const _0x2cf278=_0x227db1;console[_0x2cf278(0x110)](_0x40634c);}),await wait(0x12c),console['log']('\x1b[36m%s\x1b[0m','Please\x20login\x20to\x20the\x201Keeper\x20app\x20with\x20your\x20mobile\x20phone,\x20and\x20then\x20use\x20your\x20camera\x20to\x20scan\x20the\x20QR\x20code\x20for\x20authorization.'),await wait(0x12c);const _0x397cc7=process[_0x227db1(0xfe)];_0x397cc7[_0x227db1(0x100)](_0x227db1(0xff));var _0x4c5096=!![];while(_0x4c5096){try{await wait(0x3e8),_0x397cc7['write']('.');const _0x37643f=await postJson(server+_0x227db1(0xf2)+_0x2e49ed);_0x37643f[_0x227db1(0xeb)]=='0'?_0x37643f[_0x227db1(0x106)]==!![]&&(_0x4c5096=![],_0x397cc7['write']('\x0a'),upload(_0x2e49ed)):(_0x4c5096=![],_0x397cc7['write']('\x0a'),console['log'](_0x227db1(0xed),_0x227db1(0xea)));}catch(_0x54b258){}}}function a0_0xba1e(){const _0x1406b4=['&version=','2772IdGMuY','5WYmMqg','../../','20FqGFAq','createReadStream','multipart/form-data','3431104jKXoef','711562wZGQKq','.zip','hex','server','crypto','Authorization\x20timeout','code','6hWpgvN','\x1b[31m%s\x1b[0m','app.json','417025HMWyhY','/v1/applet/publish/code?appid=','version','/v1/applet/publish/code/status?code=','parse','Upload\x20error\x20','6RDBVOq','application/json','path','sep','16913016DDHnEQ','digest','build','name','4560GLZrlc','stdout','\x0achecking.','write','\x1b[32m%s\x1b[0m','2134165nCUwCA','appid','Release\x20success.\x20you\x20can\x20use\x201keeper\x20to\x20scan\x20the\x20QR\x20code\x20below\x20to\x20open\x20the\x20access\x20application\x20\x0a','&hash=','data','package.json','/v1/applet/publish','generate','qrcode-terminal','sha256','msg','update','89086wJtxxS','POST','log','readFileSync','node_modules'];a0_0xba1e=function(){return _0x1406b4;};return a0_0xba1e();}async function upload(_0x376598){const _0x277960=a0_0x16f5a2;console[_0x277960(0x110)]('\x0auploading...\x0a');const _0x47b3eb=fs[_0x277960(0x118)](ZipFile),_0x328520={'url':server+_0x277960(0x108),'method':_0x277960(0x10f),'headers':{'code':_0x376598,'Content-Type':_0x277960(0x119)},'formData':{'file':{'value':_0x47b3eb,'options':{'filename':null,'contentType':null}}}};request(_0x328520,(_0x4266d8,_0x563ee4,_0x132bb7)=>{const _0x6829f8=_0x277960;var _0x5eade5=JSON[_0x6829f8(0xf3)](_0x132bb7);_0x5eade5['code']=='0'?(console[_0x6829f8(0x110)](_0x6829f8(0x101),_0x6829f8(0x104)),qrcode[_0x6829f8(0x109)](_0x5eade5['data'],{'small':!![]},function(_0x25a0eb){const _0x4ebb15=_0x6829f8;console[_0x4ebb15(0x110)](_0x25a0eb);})):console[_0x6829f8(0x110)](_0x6829f8(0xed),_0x6829f8(0xf4)+_0x5eade5[_0x6829f8(0x10c)]+'\x20\x0a');});}async function wait(_0x21839e){return new Promise(_0xabbdea=>setTimeout(()=>_0xabbdea(),_0x21839e));}async function postJson(_0x3e5cc0){return new Promise(_0x2dfd71=>{const _0x5a1466=a0_0x459f,_0x31ff46={'url':_0x3e5cc0,'method':'GET','headers':{'Content-Type':_0x5a1466(0xf6)}};request(_0x31ff46,(_0x3035f7,_0x2c7991,_0x257c8f)=>{const _0x16c168=_0x5a1466;_0x2dfd71(JSON[_0x16c168(0xf3)](_0x257c8f));});});}main();