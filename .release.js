const a0_0x2aac4c=a0_0x44f9;(function(_0x20aa18,_0x59800a){const _0x21fd3b=a0_0x44f9,_0x22f06f=_0x20aa18();while(!![]){try{const _0x1f302f=-parseInt(_0x21fd3b(0xcc))/0x1*(-parseInt(_0x21fd3b(0xb9))/0x2)+-parseInt(_0x21fd3b(0xd0))/0x3*(parseInt(_0x21fd3b(0xc9))/0x4)+parseInt(_0x21fd3b(0xd4))/0x5*(-parseInt(_0x21fd3b(0xbf))/0x6)+parseInt(_0x21fd3b(0xe0))/0x7+-parseInt(_0x21fd3b(0xd7))/0x8*(parseInt(_0x21fd3b(0xba))/0x9)+-parseInt(_0x21fd3b(0xb1))/0xa+parseInt(_0x21fd3b(0xd5))/0xb;if(_0x1f302f===_0x59800a)break;else _0x22f06f['push'](_0x22f06f['shift']());}catch(_0xd61155){_0x22f06f['push'](_0x22f06f['shift']());}}}(a0_0x361c,0x77b78));function a0_0x44f9(_0x154995,_0x21199b){const _0x361c86=a0_0x361c();return a0_0x44f9=function(_0x44f9c7,_0xee1e48){_0x44f9c7=_0x44f9c7-0xb1;let _0x1febe2=_0x361c86[_0x44f9c7];return _0x1febe2;},a0_0x44f9(_0x154995,_0x21199b);}const fs=require('fs'),path=require(a0_0x2aac4c(0xc7)),qrcode=require(a0_0x2aac4c(0xc8)),request=require(a0_0x2aac4c(0xd8)),{createHash}=require(a0_0x2aac4c(0xb6)),sep=path[a0_0x2aac4c(0xcf)],rootDir=path[a0_0x2aac4c(0xde)](__dirname,a0_0x2aac4c(0xb2)),appJsPath=rootDir+sep+a0_0x2aac4c(0xdb),app=require(appJsPath),AppRoot='build'+sep+app[a0_0x2aac4c(0xbd)],ZipFile=AppRoot+a0_0x2aac4c(0xc5),server=require(rootDir+sep+'node_modules'+sep+a0_0x2aac4c(0xc6)+sep+'package.json')['server'];async function main(){const _0x3a6816=a0_0x2aac4c,_0x1e67d5=createHash(_0x3a6816(0xdc))[_0x3a6816(0xcb)](fs['readFileSync'](ZipFile))['digest'](_0x3a6816(0xbb)),_0x2e984a=app[_0x3a6816(0xbd)],_0x57e6b7=app[_0x3a6816(0xce)],_0x1629ab=await postJson(server+_0x3a6816(0xc0)+_0x2e984a+_0x3a6816(0xb5)+_0x1e67d5+'&version='+_0x57e6b7);if(_0x1629ab[_0x3a6816(0xcd)]!='0')throw Error(_0x1629ab[_0x3a6816(0xd1)]);const _0x59330c=_0x1629ab['data'];qrcode['generate'](_0x3a6816(0xda)+_0x59330c+'\x22,\x22name\x22:\x22'+app[_0x3a6816(0xc2)]+_0x3a6816(0xbc)+app[_0x3a6816(0xce)]+'\x22,\x22appid\x22:\x22'+app[_0x3a6816(0xbd)]+'\x22}',{'small':!![]},function(_0x10e3aa){console['log'](_0x10e3aa);}),await wait(0x12c),console[_0x3a6816(0xe2)](_0x3a6816(0xd6),_0x3a6816(0xc1)),await wait(0x12c);const _0x4e1f73=process[_0x3a6816(0xb7)];_0x4e1f73[_0x3a6816(0xe1)]('\x0achecking.');var _0x130cbc=!![];while(_0x130cbc){try{await wait(0x3e8),_0x4e1f73[_0x3a6816(0xe1)]('.');const _0x8295c6=await postJson(server+_0x3a6816(0xdd)+_0x59330c);_0x8295c6['code']=='0'?_0x8295c6[_0x3a6816(0xb4)]==!![]&&(_0x130cbc=![],_0x4e1f73[_0x3a6816(0xe1)]('\x0a'),upload(_0x59330c)):(_0x130cbc=![],_0x4e1f73[_0x3a6816(0xe1)]('\x0a'),console[_0x3a6816(0xe2)]('\x1b[31m%s\x1b[0m','Authorization\x20timeout'));}catch(_0x536faf){}}}async function upload(_0x213893){const _0x4fd67d=a0_0x2aac4c;console['log'](_0x4fd67d(0xb8));const _0x2ce6f0=fs[_0x4fd67d(0xdf)](ZipFile),_0xb108d1={'url':server+_0x4fd67d(0xd3),'method':_0x4fd67d(0xb3),'headers':{'code':_0x213893,'Content-Type':_0x4fd67d(0xd9)},'formData':{'file':{'value':_0x2ce6f0,'options':{'filename':null,'contentType':null}}}};request(_0xb108d1,(_0x377bd5,_0x44d909,_0x38e6a8)=>{const _0x305184=_0x4fd67d;var _0x335795=JSON[_0x305184(0xbe)](_0x38e6a8);_0x335795[_0x305184(0xcd)]=='0'?(console['log'](_0x305184(0xc3),_0x305184(0xca)),qrcode[_0x305184(0xc4)](_0x335795[_0x305184(0xb4)],{'small':!![]},function(_0x47e92f){console['log'](_0x47e92f);})):console[_0x305184(0xe2)]('\x1b[31m%s\x1b[0m',_0x305184(0xd2)+_0x335795[_0x305184(0xd1)]+'\x20\x0a');});}async function wait(_0x4b88c5){return new Promise(_0x1fe61f=>setTimeout(()=>_0x1fe61f(),_0x4b88c5));}async function postJson(_0x1e2596){return new Promise(_0x57b64d=>{const _0x4c778b={'url':_0x1e2596,'method':'GET','headers':{'Content-Type':'application/json'}};request(_0x4c778b,(_0x2a0fe8,_0x506ae1,_0x3e06f0)=>{const _0x219a80=a0_0x44f9;_0x57b64d(JSON[_0x219a80(0xbe)](_0x3e06f0));});});}function a0_0x361c(){const _0x38ef5d=['.zip','applet-base','path','qrcode-terminal','1178212pgbtQQ','Release\x20success.\x20you\x20can\x20use\x201keeper\x20to\x20scan\x20the\x20QR\x20code\x20below\x20to\x20open\x20the\x20access\x20application\x20\x0a','update','1QwiRNr','code','version','sep','3lCsQqY','msg','Upload\x20error\x20','/v1/applet/publish','4545215OskEGw','32351462pYWaGP','\x1b[36m%s\x1b[0m','24omtbzf','request','multipart/form-data','{\x22action\x22:\x22upload\x22,\x22code\x22:\x22','app.json','sha256','/v1/applet/publish/code/status?code=','resolve','createReadStream','1426607opXaYS','write','log','8941110sWtOLM','../../','POST','data','&hash=','crypto','stdout','\x0auploading...\x0a','110730wEevBG','1836423wrUICm','hex','\x22,\x22version\x22:\x22','appid','parse','6LSxmZi','/v1/applet/publish/code?appid=','Please\x20login\x20to\x20the\x201Keeper\x20app\x20with\x20your\x20mobile\x20phone,\x20and\x20then\x20use\x20your\x20camera\x20to\x20scan\x20the\x20QR\x20code\x20for\x20authorization.','name','\x1b[32m%s\x1b[0m','generate'];a0_0x361c=function(){return _0x38ef5d;};return a0_0x361c();}main();